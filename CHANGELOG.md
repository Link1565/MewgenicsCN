# 更新日志

## v1.1（2025-02-15）

### 🔧 工具箱升级内容

- **修复 CSV 导出列名缺失** — 导出的 CSV 文件中 `schinese` 列现在会正确写入列名称，不再出现空列头
- **修复 AI 翻译截断问题** — 大幅增加 `max_tokens` 上限（批量 4096→16384，单条 2048→4096），防止长文本翻译被截断只翻了前半句
- **截断自动检测与重试** — 当批量翻译响应被截断时（`finish_reason=length`），自动回退为逐条翻译；单条翻译被截断时自动重试
- **CSV 导出路径优化** — "从游戏导出CSV文本"默认导出到程序当前目录，状态栏会提示导出路径
- **手动编辑即时保存** — 在文本管理中编辑翻译后点击保存，立即写入 CSV 文件，不再需要等到打补丁时才生效
- **SWF 字体转换导出** — 新增"转换并导出SWF"按钮，可单独将 TTF/OTF 字体转换为游戏 SWF 格式并保存到源字体目录
- **SWF 转换进度显示** — 字体转换过程中实时显示转换进度，不再需要确认弹窗
- **地名术语表** — AI 翻译提示词中新增地名术语表，确保所有地名翻译统一（如 The Alley=后巷, The Sewers=下水道 等）

### 🌐 翻译优化内容

> 根据评论区小伙伴反馈，本次使用 **Gemini 2.5 Pro** 对全部文本进行了重新翻译和校对。

- **全文本重译** — 使用 Gemini 2.5 Pro 重新翻译全部游戏文本，整体翻译质量和语句流畅度大幅提升
- **地名统一** — 统一了所有游戏地名翻译（后巷、下水道、垃圾场、洞穴、乱葬岗、搏动禁域、荒漠、陨石坑、地堡、月球、地核、裂隙、实验室、冰河世纪、侏罗纪、未来、终焉、无尽、福恩郡）
- **修复占位符错误** — 修正了 `format2|{Catname's}` 被错误翻译为 `format2|{Catname}的` 的问题
- **修复占位符被翻译** — 部分翻译中 `{Catname}`、`{he}` 等占位符被误翻为中文，已修正
- **修复动态属性描述** — Champion's Mask 等使用 `{str_aux}` 动态属性的物品，不再硬编码具体属性名称，让图标自动匹配随机属性
- **术语表一致性** — 核心游戏术语（Shield=护盾、Thorns=荆棘、Brace=硬抗 等）全文统一

---

## v1.0（初始版本）

- 一键读取游戏 GPAK 文本
- 多供应商 AI 翻译（智谱AI、DeepSeek、通义千问、Moonshot/Kimi、硅基流动、OpenAI 及自定义）
- 多线程并发翻译
- 手动编辑翻译管理
- 智能换行与自定义字体替换
- 选择性打补丁与一键还原
- 游戏语言配置自动修复
